
## 컨테이너

컨테이너란 호스트 OS상에 논리적인 구획(컨테이너)을 만들고, 애플리케이션을 작동시키기 위해 필요한 라이브러리나 애플리케이션 등을 하나로 모아, 마치 별도의 서버인 것처럼 사용할 수 있게 만든 것입니다.

![](https://tech.osci.kr/assets/images/91690167/1.png)
참조 : [https://tech.osci.kr/2020/03/03/91690167/]

와 같이 하나의 OS 위에서 여러가지 어플리케이션이 돌아갈 수 있는 환경을 설정하는 것

보통 물리 서버 상에 설치한 호스트 OS의 경우 하나의 OS 상에서 움직이는 여러 애플리케이션은 똑같은 시스템 리소스를 사용한다.

이때 작동하는 여러 어플리케이션은 데이터를 저장하는 디렉토리를 공유하고, 서버에 설정된 동일한 IP주소로 통신을 한다. 

> 그래서 여러 어플리케이션에서 사용하고 있는 미들웨어나 라이브러리의 버전이 다른 경우에는 각 어플리케이션이 서로 영향을 받지 않도록 주의해야 한다.

**이에 반해** 컨테이너 기술을 사용하면 OS나 디렉토리, IP 주소 등과 같은 시스템 자원을 마치 각 어플리케이션이 점유하고 있는 것처럼 보이게 할 수 있다.

- 보이게 할 수 있다 -- 추상화 개념이라는 것이 중요하다.

컨테이너는 어플리케이션의 실행에 필요한 모듈을 컨테이너로 모을 수 있기 때문에 여러 개의 컨테이너를 조합하여 하나의 어플리케이션을 구축하는 마이크로 서비스형 어플리케이션과 친화성이 높다.

---
## Note : 서버 가상화 기술

### 호스트형 서버 가상화

호스트형 서버 가상화는 하드웨어 상에 베이스가 되는 호스트 OS를 설치하고, 호스트 OS에 가상화 소프트웨어를 설치한 후, 이 가상화 소프트웨어 상에서 게스트 OS들을 작동시키는 기술을 말한다.

- 예를 들어서 맥북의 Parallels Desktop 등, 유명한 Virtual Box 등의 소프트웨어를 말한다.

이러한 것은 간편하게 가상 환경을 구축할 수 있지만, 컨테이너 방식과는 다르게, 호스트 OS 위에서 다른 게스트 OS를 움직이고 있기 때문에 오버헤드(overhead)가 커진다.

- Overhead : 가상화를 수행하기 위해서 필요한 CPU 자원, 디스크 용량, 메모리 사용량 등을 말한다.

**컨테이너 기술과 서버 가상화 기술은 매우 비슷하지만 목적이 다르다.**

> 컨테이너 기술은 어플리케이션 실행 환경을 모음으로써 이식성을 높이고 확장성이 좋은 환경에서 작동하는 것을 지향하고 있다.

> 반면에, 가상화 기술의 대부분은 서로 다른 환경을 어떻게 효율적으로 에뮬레이트할지라는 점을 지향하고 있다. 

---


## 프로그래머에게 Docker란

웹 시스템 개발 시 어플리케이션을 제품 환경에서 가동시키기 위해서는 많은 요소가 필요하다.

- 어플리케이션의 실행 모듈(프로그램 본체)
- 미들웨어나 라이브러리 군
- OS/네트워크 등과 같은 인프라 환경 설정

대표적으로 위의 요소들이 되겠다.


보통 개발 흐름은 다음과 같다

![](https://post-phinf.pstatic.net/MjAxOTA5MjdfMTI4/MDAxNTY5NTQ0MTUyODcx.j2Qtq2z8fLtVYis6rcnvGLXdSPqcDb0SPUX6bPmLLQIg.IPokbwEzHrokvQJp0X0DB5RH4edm-vH56eGHwTMWMgIg.JPEG/mug_obj_201909270929138862.jpg?type=w1080)

참조 : [정보문화사 : 컨테이너 애플리케이션 개발의 흐름](https://m.post.naver.com/viewer/postView.nhn?volumeNo=25851012&memberNo=15488377)

워터폴 방식으로 개발을 진행할 때, 개발 환경이나 테스트 환경에서는 올바르게 작동해도 스테이징 환경이나, 실제 환경에서 실행하면 제대로 작동하지 않는 경우도 있다.

- 스테이징 환경 : 지속적인 딜리버리가 일어나는 시스템 개발에서 개발한 어플리케이션을 제품 환경에 전개하기 직전에 확인하는 테스트 환경


기존의 이러한 환경에서 Docker를 접목시킨다면 다음과 같이 간단한 흐름으로 개발이 가능하다.

참조 : [정보문화사 : 컨테이너 애플리케이션 개발의 흐름](https://m.post.naver.com/viewer/postView.nhn?volumeNo=25851012&memberNo=15488377)

![](https://post-phinf.pstatic.net/MjAxOTA5MjdfMTE0/MDAxNTY5NTQ0MTUyODcy.Xjp3eIcDpuOLlnv7c8F3ILZ52jKuXTCDEwrUkbCmoAAg.TdFCWH3yJyq2ZmKIHmTf-briWk5j-b1yTDJBGRIYJUsg.JPEG/mug_obj_20190927092913689.jpg?type=w1080)

프로그래머는 Docker를 사용해서 어플리케이션의 실행에 필요한 모든 것이 포함되어 있는 Docker 이미지를 작성한다. -- 이 이미지는 컨테이너의 바탕이 된다.

이 이미지는 Docker가 설치되어 있는 환경이라면 기본적으로 어디서든지 작동되므로

> 개발/테스트 환경에서는 움직이지만 제품 환경에서는 움직이지 않는다

와 같은 리스크를 줄일 수 있다.

또한, 어플리케이션 개발부터 테스트에 대한 과정을 따로 수행하지 않고 어플리케이션 엔지니어가 수행하는 것이 가능하므로, 생산성이 향상된다.

## Docker의 기능

Docker에는 크게 세 가지의 기능이 있다.

- Docker 이미지를 만드는 기능(Build)
- Docker 이미지를 공유하는 기능(Ship)
- Docker 컨테이너를 작동시키는 기능(Run)

---
## Note : 시스템 운용 설계의 어려움

제품 환경에서는 모든 Docker 컨테이너를 한 대의 호스트 머신(물리 머신)에서 작동시키는 일은 드물며, 시스템의 트래픽 증감이나 가용성 요건, 신뢰도 요건 등을 고려한 후에 여러 대의 호스트 머신으로 된 분산 환경을 구축한다.

(그리고 보통 컨테이너 관리에 대해서는 오케스트레이션 툴을 이용하는 것이 일반적 - 대표적으로 Kubernetes)

- 오케스트레이션은 컴퓨터 시스템과 애플리케이션, 서비스의 자동화된 설정, 관리, 조정을 의미. 오케스트레이션은 IT 팀이 복잡한 태스크와 워크플로우를 보다 쉽게 관리할 수 있도록 돕는다.
![](https://blog.2dal.com/wp-content/uploads/2017/03/logo.png)


---
